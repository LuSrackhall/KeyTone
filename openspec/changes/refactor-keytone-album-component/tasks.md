# é”®éŸ³ä¸“è¾‘ç»„ä»¶æ‹†åˆ†é‡æ„ - ä»»åŠ¡æ¸…å•

> ç›®æ ‡ï¼šæ‹†åˆ† `Keytone_album.vue`ï¼Œä¸æ”¹å˜ä»»ä½•ç°æœ‰åŠŸèƒ½/è¡Œä¸ºã€‚

---

## å½“å‰è¿›åº¦æ¦‚è§ˆ

| Phase   | çŠ¶æ€     | è¯´æ˜                                   |
| ------- | -------- | -------------------------------------- |
| Phase 0 | âœ… å®Œæˆ   | åŸºçº¿éªŒè¯é€šè¿‡                           |
| Phase 1 | âœ… å®Œæˆ   | ç›®å½•ç»“æ„å’Œç±»å‹æ–‡ä»¶å·²åˆ›å»º               |
| Phase 2 | âœ… å®Œæˆ   | Step1/2/3 å·²æ›¿æ¢ä¸ºç‹¬ç«‹ç»„ä»¶ï¼ŒStep4 ä¿ç•™ |
| Phase 3 | âœ… å®Œæˆ   | 6 ä¸ªæ ¸å¿ƒ Dialog ç»„ä»¶å·²åˆ›å»º             |
| Phase 4 | â¸ï¸ æš‚åœ   | å¯é€‰ï¼Œå¾…åç»­                           |
| Phase 5 | ğŸ”„ è¿›è¡Œä¸­ | éœ€æ‰‹åŠ¨å›å½’æµ‹è¯•                         |

---

## Phase 0: å‡†å¤‡ä¸åŸºçº¿

- [x] 0.1 è®°å½•å…³é”®æ‰‹åŠ¨å›å½’è·¯å¾„ï¼ˆå¯¹åº” proposal çš„ Validation æœ€å°é›†ï¼‰
- [x] 0.2 åœ¨æ‹†åˆ†å‰ç¡®è®¤ `npm -C frontend run lint` ä¸ `npm -C frontend run build` å¯é€šè¿‡ï¼ˆä½œä¸ºåŸºçº¿ï¼‰

## Phase 1: ç›®å½•ç»“æ„ä¸å…¼å®¹å…¥å£

- [x] 1.1 æ–°å»ºç›®å½• `frontend/src/components/keytone-album/`ï¼ˆsteps/dialogs/composablesï¼‰
- [x] 1.2 åˆ›å»ºç±»å‹å®šä¹‰æ–‡ä»¶ `types.ts`
- [x] 1.3 åˆ›å»ºæ¨¡å—å…¥å£ `index.ts`
- [x] 1.4 æ„å»ºéªŒè¯é€šè¿‡

## Phase 2: Step ç»„ä»¶æ¸è¿›æ‹†åˆ†ï¼ˆæ¨¡æ¿ä¼˜å…ˆï¼‰ âœ…

### 2.0 çˆ¶ç»„ä»¶ provide é›†æˆ âœ…

- [x] 2.0.1 åœ¨ `Keytone_album.vue` ä¸­å¯¼å…¥ `provide` å’Œ Context ç±»å‹
- [x] 2.0.2 æ„å»º `keytoneAlbumContext` å¯¹è±¡ï¼ŒåŒ…å«æ‰€æœ‰çŠ¶æ€å’Œæ–¹æ³•
- [x] 2.0.3 è°ƒç”¨ `provide(KEYTONE_ALBUM_CONTEXT_KEY, keytoneAlbumContext)`
- [x] 2.0.4 æ„å»ºéªŒè¯é€šè¿‡

### 2.1 Step1 å­ç»„ä»¶ âœ…

- [x] åˆ›å»º `steps/StepLoadAudioFiles.vue` ç»„ä»¶æ¡†æ¶
- [x] å®šä¹‰ç»„ä»¶ç»“æ„ï¼Œé€šè¿‡ inject è·å– Context
- [x] æ·»åŠ è¯¦ç»†æ¶æ„æ³¨é‡Š
- [x] ç”¨å­ç»„ä»¶æ›¿æ¢çˆ¶ç»„ä»¶ä¸­çš„åŸæœ‰ Step1 æ¨¡æ¿

### 2.2 Step2 å­ç»„ä»¶ âœ…

- [x] åˆ›å»º `steps/StepDefineSounds.vue` ç»„ä»¶æ¡†æ¶
- [x] å®šä¹‰ç»„ä»¶ç»“æ„ï¼Œé€šè¿‡ inject è·å– Context
- [x] æ·»åŠ è¯¦ç»†æ¶æ„æ³¨é‡Š
- [x] ç”¨å­ç»„ä»¶æ›¿æ¢çˆ¶ç»„ä»¶ä¸­çš„åŸæœ‰ Step2 æ¨¡æ¿

### 2.3 Step3 å­ç»„ä»¶ âœ…

- [x] åˆ›å»º `steps/StepCraftKeySounds.vue` ç»„ä»¶æ¡†æ¶
- [x] å®šä¹‰ç»„ä»¶ç»“æ„ï¼Œé€šè¿‡ inject è·å– Context
- [x] æ·»åŠ è¯¦ç»†æ¶æ„æ³¨é‡Š
- [x] ç”¨å­ç»„ä»¶æ›¿æ¢çˆ¶ç»„ä»¶ä¸­çš„åŸæœ‰ Step3 æ¨¡æ¿

### 2.4 Step4 å­ç»„ä»¶ (éƒ¨åˆ†å®Œæˆ)

- [x] åˆ›å»º `steps/StepLinkageEffects.vue` ç»„ä»¶æ¡†æ¶
- [x] å®šä¹‰ç»„ä»¶ç»“æ„ï¼Œé€šè¿‡ inject è·å– Context
- [x] æ·»åŠ è¯¦ç»†æ¶æ„æ³¨é‡Š
- [ ] **å¾…å®Œæˆ**: ç”¨å­ç»„ä»¶æ›¿æ¢çˆ¶ç»„ä»¶ä¸­çš„åŸæœ‰ Step4 æ¨¡æ¿ (å¤æ‚åº¦é«˜ï¼ŒåŒ…å«è™šæ‹Ÿé”®ç›˜)

## Phase 3: Dialog æŠ½ç¦»ï¼ˆæå‡å¯å¤ç”¨ï¼‰ âœ…

- [x] 3.1 å°†"æ–°å¢éŸ³é¢‘æºæ–‡ä»¶"å¯¹è¯æ¡†æŠ½ç¦» â†’ `dialogs/AddAudioFileDialog.vue`
- [x] 3.2 å°†"ç®¡ç†éŸ³é¢‘æºæ–‡ä»¶"å¯¹è¯æ¡†æŠ½ç¦» â†’ `dialogs/ManageAudioFilesDialog.vue`
- [x] 3.3 å°†"åˆ›å»ºå£°éŸ³"å¯¹è¯æ¡†æŠ½ç¦» â†’ `dialogs/CreateSoundDialog.vue`
- [x] 3.4 å°†"ç¼–è¾‘å£°éŸ³"å¯¹è¯æ¡†æŠ½ç¦» â†’ `dialogs/EditSoundDialog.vue`
- [x] 3.5 å°†"åˆ›å»ºæŒ‰é”®éŸ³"å¯¹è¯æ¡†æŠ½ç¦» â†’ `dialogs/CreateKeySoundDialog.vue`
- [x] 3.6 å°†"ç¼–è¾‘æŒ‰é”®éŸ³"å¯¹è¯æ¡†æŠ½ç¦» â†’ `dialogs/EditKeySoundDialog.vue`
- [ ] 3.7 å°†"å…¨é”®å£°æ•ˆ"å¯¹è¯æ¡†æŠ½ç¦» â†’ `dialogs/EveryKeyEffectDialog.vue` (å¯é€‰)
- [ ] 3.8 å°†"å•é”®å£°æ•ˆ"å¯¹è¯æ¡†æŠ½ç¦» â†’ `dialogs/SingleKeyEffectDialog.vue` (å¯é€‰)

## Phase 4: é€»è¾‘åŸŸ composablesï¼ˆå¯é€‰ã€ä½é£é™©é€æ­¥ï¼‰

- [ ] 4.1 æŠ½ç¦» SSE æ˜ å°„é€»è¾‘åˆ° `composables/useKeytoneAlbumSseSync.ts`
- [ ] 4.2 æŠ½ç¦»åˆ—è¡¨æ˜ å°„/è‡ªç„¶æ’åºé€»è¾‘
- [ ] 4.3 æŠ½ç¦»ä¾èµ–æ ¡éªŒé€»è¾‘

## Phase 5: æ¸…ç†ä¸éªŒè¯

- [ ] 5.1 ç¡®ä¿æ— é‡å¤äº‹ä»¶ç›‘å¬ã€watch è¡Œä¸ºæœªæ”¹å˜
- [ ] 5.2 ç¡®ä¿æ ·å¼ä½œç”¨åŸŸä¸å›å½’
- [ ] 5.3 è¿è¡Œ `npm -C frontend run lint`
- [ ] 5.4 è¿è¡Œ `npm -C frontend run build`
- [ ] 5.5 å®Œæˆæœ€å°æ‰‹åŠ¨å›å½’è·¯å¾„

---

## å·²åˆ›å»º/ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•

| æ–‡ä»¶è·¯å¾„                                           | è¯´æ˜                           | çŠ¶æ€ |
| -------------------------------------------------- | ------------------------------ | ---- |
| `Keytone_album.vue`                                | çˆ¶ç»„ä»¶ï¼ˆå·²æ·»åŠ  provideï¼‰       | âœ…    |
| `keytone-album/types.ts`                           | Context æ¥å£å’Œæ‰€æœ‰æ•°æ®ç±»å‹å®šä¹‰ | âœ…    |
| `keytone-album/index.ts`                           | æ¨¡å—å…¥å£ï¼Œç»Ÿä¸€å¯¼å‡º             | âœ…    |
| `keytone-album/steps/StepLoadAudioFiles.vue`       | Step 1: åŠ è½½éŸ³é¢‘æºæ–‡ä»¶         | âœ…    |
| `keytone-album/steps/StepDefineSounds.vue`         | Step 2: å®šä¹‰å£°éŸ³               | âœ…    |
| `keytone-album/steps/StepCraftKeySounds.vue`       | Step 3: åˆ¶ä½œæŒ‰é”®éŸ³             | âœ…    |
| `keytone-album/steps/StepLinkageEffects.vue`       | Step 4: è”åŠ¨å£°æ•ˆ               | âœ…    |
| `keytone-album/dialogs/AddAudioFileDialog.vue`     | æ·»åŠ éŸ³é¢‘æ–‡ä»¶å¯¹è¯æ¡†             | âœ…    |
| `keytone-album/dialogs/ManageAudioFilesDialog.vue` | ç®¡ç†éŸ³é¢‘æ–‡ä»¶å¯¹è¯æ¡†             | âœ…    |
| `keytone-album/dialogs/CreateSoundDialog.vue`      | åˆ›å»ºå£°éŸ³å¯¹è¯æ¡†                 | âœ…    |
| `keytone-album/dialogs/EditSoundDialog.vue`        | ç¼–è¾‘å£°éŸ³å¯¹è¯æ¡†                 | âœ…    |
| `keytone-album/dialogs/CreateKeySoundDialog.vue`   | åˆ›å»ºæŒ‰é”®éŸ³å¯¹è¯æ¡†               | âœ…    |
| `keytone-album/dialogs/EditKeySoundDialog.vue`     | ç¼–è¾‘æŒ‰é”®éŸ³å¯¹è¯æ¡†               | âœ…    |

---

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

**å½“å‰çŠ¶æ€**: 
- âœ… Step1/2/3 å·²æ›¿æ¢ä¸ºç‹¬ç«‹ç»„ä»¶ï¼ˆçˆ¶ç»„ä»¶å‡å°‘çº¦ 1750 è¡Œï¼‰
- âœ… Step4 ä¿ç•™åŸå§‹å®ç°ï¼ˆå¤æ‚åº¦é«˜ï¼ŒåŒ…å«è™šæ‹Ÿé”®ç›˜ï¼‰
- âœ… 6 ä¸ªæ ¸å¿ƒ Dialog ç»„ä»¶å·²åˆ›å»ºå¹¶é›†æˆ
- âœ… æ„å»ºéªŒè¯é€šè¿‡ï¼ˆæ— é”™è¯¯ï¼‰

**ä¸‹ä¸€æ­¥é€‰æ‹©**:

### é€‰é¡¹ A: æ‰‹åŠ¨åŠŸèƒ½å›å½’æµ‹è¯•ï¼ˆæ¨èï¼‰

æŒ‰ç…§ Validation æœ€å°é›†è¿›è¡Œæµ‹è¯•ï¼š
1. Step1ï¼šä¸Šä¼ /ç®¡ç†éŸ³é¢‘æºæ–‡ä»¶
2. Step2ï¼šåˆ›å»º/ç¼–è¾‘/åˆ é™¤/é¢„è§ˆå£°éŸ³
3. Step3ï¼šåˆ›å»º/ç¼–è¾‘/åˆ é™¤é”®éŸ³ï¼›ä¾èµ–è­¦å‘Šå±•ç¤º
4. Step4ï¼šåˆ‡æ¢ embedded test soundï¼›æ‰“å¼€å…¨å±€è®¾ç½®å¯¹è¯æ¡†å¹¶é€‰æ‹©å£°æ•ˆ

### é€‰é¡¹ B: ç»§ç»­æ‹†åˆ† Step4

å°† Step4 çš„å¤æ‚å†…å®¹ï¼ˆè™šæ‹Ÿé”®ç›˜ã€EveryKeyEffect å¯¹è¯æ¡†ã€SingleKeyEffect å¯¹è¯æ¡†ï¼‰æ‹†åˆ†ä¸ºç‹¬ç«‹ç»„ä»¶ã€‚

---

## å˜æ›´å†å²

| æ—¥æœŸ       | å˜æ›´å†…å®¹                                       |
| ---------- | ---------------------------------------------- |
| 2024-12-30 | **æ¨¡æ¿æ›¿æ¢å®Œæˆ**: Step1/2/3 æ›¿æ¢ä¸ºç‹¬ç«‹ç»„ä»¶     |
| 2024-12-30 | åˆ›å»º 4 ä¸ª Dialog ç»„ä»¶ï¼ˆå£°éŸ³/æŒ‰é”®éŸ³çš„åˆ›å»ºç¼–è¾‘ï¼‰ |
| 2024-12-30 | åˆ›å»º Step2/3/4 ç»„ä»¶æ¡†æ¶ï¼Œæ„å»ºéªŒè¯é€šè¿‡          |
| 2024-12-30 | æ·»åŠ  provide åˆ°çˆ¶ç»„ä»¶ `Keytone_album.vue`      |
| 2024-12-30 | åˆ›å»º Step1 ç»„ä»¶å’Œä¸¤ä¸ª Dialog ç»„ä»¶              |
| 2024-12-30 | åˆ›å»ºç›®å½•ç»“æ„å’ŒåŸºç¡€æ–‡ä»¶                         |
| 2024-12-30 | åˆå§‹åŒ–ä»»åŠ¡æ¸…å•                                 |
