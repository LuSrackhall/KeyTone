## Context

`Keytone_album.vue` å½“å‰æŠŠ"æ­¥éª¤ UI + å¤šå±‚ dialog + SSE æ˜ å°„ + é…ç½®å†™å› + ä¾èµ–æ ¡éªŒæç¤º + æ ·å¼"å…¨éƒ¨èšåˆåœ¨å•æ–‡ä»¶ä¸­ã€‚

å…¶æ ¸å¿ƒé£é™©åœ¨äºï¼šä»»ä½•å¾®å°æ”¹åŠ¨éƒ½ä¼šè§¦å‘å¤§èŒƒå›´é‡ç¼–è¯‘ã€éš¾ä»¥å®šä½å›å½’ï¼Œå¹¶ä¸”è·¨æ­¥éª¤å¤ç”¨ dialog çš„è¯‰æ±‚ä¼šè¿›ä¸€æ­¥æ”¾å¤§è€¦åˆã€‚

## Goals / Non-Goals

### Goals

- **é›¶è¡Œä¸ºå˜æ›´**ï¼šæ‹†åˆ†åç”¨æˆ·ä¾§è¡Œä¸ºä¿æŒä¸€è‡´ã€‚
- **è¾¹ç•Œæ¸…æ™°**ï¼šæŒ‰ step ä¸å¯¹è¯æ¡†èŒè´£æ‹†åˆ†ï¼Œé™ä½å•æ–‡ä»¶å¤æ‚åº¦ã€‚
- **å¯å¤ç”¨**ï¼šå¯¹è¯æ¡†æ”¯æŒè¢«ä»»æ„æ­¥éª¤ç›´æ¥æ‹‰èµ·ï¼ˆä¸å¼ºç»‘åœ¨æŸä¸ª step å†…éƒ¨ï¼‰ã€‚
- **æ¸è¿›è¿ç§»**ï¼šå…è®¸é€æ­¥æ‹†åˆ†ï¼ˆå…ˆæ‹†æ¨¡æ¿ï¼Œå†æ‹†é€»è¾‘ï¼‰ï¼Œæ¯ä¸€æ­¥éƒ½å¯ç¼–è¯‘è¿è¡Œã€‚

### Non-Goals

- ä¸åšåŠŸèƒ½å¢å¼ºæˆ– UI é‡æ–°è®¾è®¡
- ä¸å¼•å…¥æ–°çš„çŠ¶æ€ç®¡ç†æ¡†æ¶
- ä¸æ”¹åŠ¨åç«¯æ¥å£ä¸æ•°æ®ç»“æ„

---

## æ¶æ„è®¾è®¡è¯¦è§£

### æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Keytone_album.vue (çˆ¶ç»„ä»¶)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        æ‰€æœ‰çŠ¶æ€ & å‰¯ä½œç”¨                                â”‚  â”‚
â”‚  â”‚  - refs: step, pkgName, soundFileList, soundList, keySoundList...     â”‚  â”‚
â”‚  â”‚  - computed: downSoundList, upSoundList, keyOptions...                â”‚  â”‚
â”‚  â”‚  - watch: SSE ç›‘å¬ã€é…ç½®è‡ªåŠ¨ä¿å­˜                                        â”‚  â”‚
â”‚  â”‚  - methods: saveSoundConfig, deleteSound, previewSound...             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â”‚                                         â”‚
â”‚                    provide(KEYTONE_ALBUM_CONTEXT_KEY, ctx)  âœ… å·²å®ç°        â”‚
â”‚                                    â”‚                                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚    â”‚                               â”‚                               â”‚        â”‚
â”‚    â–¼                               â–¼                               â–¼        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚ â”‚ StepLoadAudio    â”‚    â”‚ StepDefineSounds â”‚    â”‚ StepCraftKey     â”‚  ...  â”‚
â”‚ â”‚ Files.vue âœ…     â”‚    â”‚ .vue [å¾…åˆ›å»º]    â”‚    â”‚ Sounds.vue       â”‚       â”‚
â”‚ â”‚                  â”‚    â”‚                  â”‚    â”‚ [å¾…åˆ›å»º]         â”‚       â”‚
â”‚ â”‚ inject(ctx)      â”‚    â”‚ inject(ctx)      â”‚    â”‚ inject(ctx)      â”‚       â”‚
â”‚ â”‚ åªè´Ÿè´£ UI æ¸²æŸ“    â”‚    â”‚ åªè´Ÿè´£ UI æ¸²æŸ“    â”‚    â”‚ åªè´Ÿè´£ UI æ¸²æŸ“    â”‚       â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚          â”‚                       â”‚                       â”‚                  â”‚
â”‚          â–¼                       â–¼                       â–¼                  â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚    â”‚ Dialog âœ… â”‚           â”‚ Dialog    â”‚           â”‚ Dialog    â”‚           â”‚
â”‚    â”‚ ç»„ä»¶      â”‚           â”‚ [å¾…åˆ›å»º]   â”‚           â”‚ [å¾…åˆ›å»º]   â”‚           â”‚
â”‚    â”‚ inject()  â”‚           â”‚ inject()  â”‚           â”‚ inject()  â”‚           â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸ºä»€ä¹ˆä½¿ç”¨ provide/inject è€Œä¸æ˜¯ props

| æ–¹æ¡ˆ                 | ä¼˜ç‚¹                            | ç¼ºç‚¹                                   |
| -------------------- | ------------------------------- | -------------------------------------- |
| **props ä¼ é€’**       | æ˜¾å¼ä¾èµ–ï¼Œç±»å‹æ£€æŸ¥å‹å¥½          | å‚æ•°çˆ†ç‚¸ï¼ˆ100+ ä¸ªçŠ¶æ€/æ–¹æ³•ï¼‰ï¼Œç»´æŠ¤å›°éš¾ |
| **Pinia store**      | è·¨ç»„ä»¶å…±äº«è‡ªç„¶                  | çŠ¶æ€è¿ç§»æˆæœ¬é«˜ï¼Œå®¹æ˜“æ”¹å˜è¡Œä¸º           |
| **provide/inject** âœ“ | é¿å… props çˆ†ç‚¸ï¼Œä¿æŒå•ä¸€æ•°æ®æº | éšå¼ä¾èµ–ï¼Œéœ€è¦ç±»å‹å®šä¹‰                 |

### æ–‡ä»¶èŒè´£è¯´æ˜

```
frontend/src/components/
â”œâ”€â”€ Keytone_album.vue              # åŸå§‹å¤§ç»„ä»¶ï¼ˆå·²æ”¹é€ ä¸ºçˆ¶ç»„ä»¶ï¼‰
â”‚                                  # èŒè´£ï¼šæŒæœ‰æ‰€æœ‰çŠ¶æ€ã€å‰¯ä½œç”¨ã€provide Context
â”‚                                  # çŠ¶æ€ï¼šâœ… å·²æ·»åŠ  provide
â”‚
â””â”€â”€ keytone-album/                 # æ–°çš„æ¨¡å—ç›®å½•
    â”œâ”€â”€ index.ts                   # æ¨¡å—å…¥å£ âœ…
    â”‚                              # èŒè´£ï¼šç»Ÿä¸€å¯¼å‡ºï¼Œä¿æŒå‘åå…¼å®¹
    â”‚
    â”œâ”€â”€ types.ts                   # ç±»å‹å®šä¹‰ âœ…
    â”‚                              # èŒè´£ï¼šå®šä¹‰ Context æ¥å£ã€æ•°æ®ç»“æ„ã€æ³¨å…¥ Key
    â”‚
    â”œâ”€â”€ steps/                     # Step å­ç»„ä»¶ç›®å½•
    â”‚   â”œâ”€â”€ StepLoadAudioFiles.vue     # Step 1: åŠ è½½éŸ³é¢‘æºæ–‡ä»¶ âœ…
    â”‚   â”œâ”€â”€ StepDefineSounds.vue       # Step 2: å®šä¹‰å£°éŸ³ âœ…
    â”‚   â”œâ”€â”€ StepCraftKeySounds.vue     # Step 3: åˆ¶ä½œæŒ‰é”®éŸ³ âœ…
    â”‚   â””â”€â”€ StepLinkageEffects.vue     # Step 4: è”åŠ¨å£°æ•ˆ âœ…
    â”‚   # èŒè´£ï¼šåªè´Ÿè´£ UI æ¸²æŸ“ï¼Œé€šè¿‡ inject è·å–çŠ¶æ€
    â”‚
    â”œâ”€â”€ dialogs/                   # Dialog å­ç»„ä»¶ç›®å½•
    â”‚   â”œâ”€â”€ AddAudioFileDialog.vue     # æ·»åŠ éŸ³é¢‘æ–‡ä»¶å¯¹è¯æ¡† âœ…
    â”‚   â”œâ”€â”€ ManageAudioFilesDialog.vue # ç®¡ç†éŸ³é¢‘æ–‡ä»¶å¯¹è¯æ¡† âœ…
    â”‚   â””â”€â”€ ... (æ›´å¤šå¯¹è¯æ¡†å¾…åˆ›å»º)
    â”‚   # èŒè´£ï¼šå¯å¤ç”¨çš„å¯¹è¯æ¡† UIï¼Œå¯è¢«ä»»æ„ Step è°ƒç”¨
    â”‚
    â””â”€â”€ composables/               # å¯å¤ç”¨é€»è¾‘ [Phase 4ï¼Œå¯é€‰]
        # èŒè´£ï¼šæŠ½ç¦»çº¯é€»è¾‘ï¼ˆå¦‚ SSE æ˜ å°„ã€æ’åºã€æ ¡éªŒï¼‰
```

### æ•°æ®æµå›¾

```
ç”¨æˆ·æ“ä½œ
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step/Dialog ç»„ä»¶   â”‚  â†â”€â”€ inject(ctx) è·å–çŠ¶æ€å’Œæ–¹æ³•
â”‚ (UI å±‚)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ è°ƒç”¨ ctx.xxx() æ–¹æ³•
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ çˆ¶ç»„ä»¶            â”‚  â†â”€â”€ çŠ¶æ€æ›´æ–°
â”‚ (æ•°æ®å±‚)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ watch è§¦å‘
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ConfigSet/Delete  â”‚  â†â”€â”€ å†™å…¥é…ç½®æ–‡ä»¶
â”‚ (æŒä¹…åŒ–å±‚)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SDK åç«¯          â”‚  â†â”€â”€ SSE æ¨é€æ›´æ–°
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ çˆ¶ç»„ä»¶            â”‚  â†â”€â”€ messageAudioPackage äº‹ä»¶ç›‘å¬
â”‚ æ›´æ–°çŠ¶æ€          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ å“åº”å¼ä¼ æ’­
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å­ç»„ä»¶ UI è‡ªåŠ¨æ›´æ–° â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Decision: é‡‡ç”¨"çˆ¶ç»„ä»¶æŒæœ‰çŠ¶æ€ + å­ç»„ä»¶æ‰¿è½½ UI"çš„æ‹†åˆ†æ–¹å¼

### é€‰æ‹©

- å°†ç°æœ‰ `Keytone_album.vue` çš„ **çŠ¶æ€ï¼ˆrefs/computed/watchï¼‰ä¸æ ¸å¿ƒå‰¯ä½œç”¨ï¼ˆSSE ç›‘å¬ã€ConfigSet/ConfigDeleteã€æ’åºã€ä¾èµ–æ ¡éªŒï¼‰** ä¿æŒåœ¨çˆ¶å±‚ã€‚
- å°†æ¯ä¸ª `q-step` çš„æ¨¡æ¿ä¸å±€éƒ¨äº¤äº’æ‹†åˆ°å•ç‹¬çš„ step ç»„ä»¶ã€‚
- å°†å¯¹è¯æ¡†ä» step å†…æŠ½ç¦»ä¸º `dialogs/` ä¸‹çš„ç»„ä»¶ï¼Œä½¿å…¶å¯è¢«ä»»æ„æ­¥éª¤ç›´æ¥æ‹‰èµ·ã€‚

### å…³é”®åŸå› 

- **æœ€å°é£é™©**ï¼šä¿ç•™æ•°æ®æµä¸å‰¯ä½œç”¨åœ¨ä¸€å¤„ï¼Œå‡å°‘"æ‹†åˆ†å¯¼è‡´ reactivity/å‰¯ä½œç”¨ä¸¢å¤±"çš„æ¦‚ç‡ã€‚
- **å‡å°‘ prop çˆ†ç‚¸**ï¼šå¦‚æœå®Œå…¨é  props ä¼ é€’å¤§é‡ refs/æ–¹æ³•ï¼Œä¼šå¯¼è‡´ step ç»„ä»¶ API å¤æ‚ã€‚

## Decision: ä¸Šä¸‹æ–‡æ³¨å…¥ï¼ˆprovide/injectï¼‰ç”¨äºå…±äº« ref ä¸ action âœ… å·²å®ç°

ä¸ºé¿å… step ç»„ä»¶ props è¿‡é•¿ï¼Œçˆ¶ç»„ä»¶æä¾›ä¸€ä¸ª `KeytoneAlbumContext`ï¼š

- çŠ¶æ€ï¼š`step`ã€`pkgName`ã€å„åˆ—è¡¨ä¸é€‰æ‹©é¡¹ refsã€å„ç§ dialog çš„ `v-model` çŠ¶æ€ç­‰
- è¡Œä¸ºï¼š`saveSoundConfig`ã€`deleteSound`ã€`previewSound`ã€`deleteKeySound`ã€é…ç½®å†™å›ç­‰

Step ä¸ Dialog ç»„ä»¶é€šè¿‡ `inject` è·å–ä¸Šä¸‹æ–‡ï¼Œè¾¾åˆ°ï¼š

- å­ç»„ä»¶æ›´è–„ï¼Œåªå…³å¿ƒ UI é€»è¾‘
- Dialog å¯åœ¨ä»»æ„ step è§¦å‘ï¼ˆæ»¡è¶³"åœ¨æŸæ­¥éª¤ä¸­æ‹‰èµ·å…¶ä»–æ­¥éª¤é…ç½®å¯¹è¯æ¡†"çš„è¯‰æ±‚ï¼‰

> è¿™ä»ç„¶ä¿æŒ"å•ä¸€æ•°æ®æº"åœ¨çˆ¶ç»„ä»¶ï¼Œä¸å¼•å…¥æ–° storeã€‚

### å®ç°ç»†èŠ‚

**ä»£ç ä½ç½®**: `Keytone_album.vue` script ç»“å°¾å¤„

```typescript
// å¯¼å…¥ Context ç±»å‹å’Œæ³¨å…¥ Key
import { KEYTONE_ALBUM_CONTEXT_KEY, type KeytoneAlbumContext } from './keytone-album/types';

// æ„å»º Context å¯¹è±¡ï¼ˆåŒ…å«æ‰€æœ‰éœ€è¦å…±äº«çš„çŠ¶æ€å’Œæ–¹æ³•ï¼‰
const keytoneAlbumContext: KeytoneAlbumContext = {
  // Props
  pkgPath: props.pkgPath,
  isCreate: props.isCreate,
  
  // æ ¸å¿ƒçŠ¶æ€
  step, pkgName,
  
  // Step1 ç›¸å…³
  addNewSoundFile, files, editSoundFile, soundFileList, selectedSoundFile,
  
  // Step2 ç›¸å…³
  createNewSound, soundName, sourceFileForSound, soundStartTime, soundEndTime, soundVolume,
  showEditSoundDialog, soundList, selectedSound,
  
  // Step3 ç›¸å…³
  createNewKeySound, keySoundName, /* ... */
  
  // Step4 ç›¸å…³
  isEnableEmbeddedTestSound, showEveryKeyEffectDialog, /* ... */
  
  // æ“ä½œå‡½æ•°
  saveSoundConfig, deleteSound, previewSound, saveKeySoundConfig, deleteKeySound,
  saveUnifiedSoundEffectConfig, saveSingleKeySoundEffectConfig,
  
  // å·¥å…·å‡½æ•°
  $t, album_options_select_label, naturalSort, /* ... */
};

// æä¾› Context ç»™å­ç»„ä»¶
provide(KEYTONE_ALBUM_CONTEXT_KEY, keytoneAlbumContext);
```

---

## å½“å‰å®ç°çŠ¶æ€

### å·²å®Œæˆçš„æ–‡ä»¶

| æ–‡ä»¶                                               | è¯´æ˜                            | çŠ¶æ€       |
| -------------------------------------------------- | ------------------------------- | ---------- |
| `Keytone_album.vue`                                | çˆ¶ç»„ä»¶æ·»åŠ  provide              | âœ… å·²å®Œæˆ   |
| `keytone-album/types.ts`                           | å®šä¹‰ Context æ¥å£å’Œæ‰€æœ‰æ•°æ®ç±»å‹ | âœ… å·²å®Œæˆ   |
| `keytone-album/index.ts`                           | æ¨¡å—å…¥å£ï¼Œç»Ÿä¸€å¯¼å‡º              | âœ… å·²å®Œæˆ   |
| `keytone-album/steps/StepLoadAudioFiles.vue`       | Step 1 UI ç»„ä»¶                  | âœ… æ¡†æ¶å®Œæˆ |
| `keytone-album/dialogs/AddAudioFileDialog.vue`     | æ·»åŠ éŸ³é¢‘æ–‡ä»¶å¯¹è¯æ¡†              | âœ… æ¡†æ¶å®Œæˆ |
| `keytone-album/dialogs/ManageAudioFilesDialog.vue` | ç®¡ç†éŸ³é¢‘æ–‡ä»¶å¯¹è¯æ¡†              | âœ… æ¡†æ¶å®Œæˆ |

### å¾…å®Œæˆ

- [ ] ç”¨æ–°çš„ Step ç»„ä»¶æ›¿æ¢åŸæœ‰æ¨¡æ¿ï¼ˆStep1 â†’ Step4ï¼‰
- [ ] åˆ›å»º Step2/3/4 ç»„ä»¶æ¡†æ¶
- [ ] åˆ›å»ºæ›´å¤š Dialog ç»„ä»¶

---

## Alternatives considered

1) **å…¨ props ä¼ é€’**
- ä¼˜ç‚¹ï¼šæ˜¾å¼ä¾èµ–
- ç¼ºç‚¹ï¼šå‚æ•°çˆ†ç‚¸ã€ç»´æŠ¤æˆæœ¬é«˜

2) **æŠ½åˆ° Pinia store**
- ä¼˜ç‚¹ï¼šè·¨ç»„ä»¶å…±äº«æ›´è‡ªç„¶
- ç¼ºç‚¹ï¼šçŠ¶æ€è¿ç§»æ›´å¤§ã€æ›´å®¹æ˜“å¼•å…¥è¡Œä¸ºå˜åŒ–ï¼›ä¸ç¬¦åˆ"æœ€å°æ”¹åŠ¨"

3) **ä¸€æ¬¡æ€§æŠŠæ‰€æœ‰é€»è¾‘æ‹†æˆ composables**
- ä¼˜ç‚¹ï¼šæœ€ç»ˆç»“æ„æ›´å¹²å‡€
- ç¼ºç‚¹ï¼šè¿ç§»é£é™©é«˜ï¼›å› æ­¤é‡‡ç”¨æ¸è¿›å¼ï¼ˆå…ˆæ‹†æ¨¡æ¿/å¯¹è¯æ¡†ï¼Œå†é€æ­¥æŠ½é€»è¾‘ï¼‰

## Risks / Trade-offs

- **é£é™©ï¼šå‰¯ä½œç”¨è§¦å‘æ—¶æœºå˜åŒ–**ï¼ˆwatchã€debounceã€SSE listenerï¼‰
  - ç¼“è§£ï¼šä¿ç•™åœ¨çˆ¶ç»„ä»¶ï¼›æ‹†åˆ†ä»…ç§»åŠ¨æ¨¡æ¿ä¸äº‹ä»¶ç»‘å®šã€‚
- **é£é™©ï¼šDialog çš„ v-model ç»‘å®šä¸å…³é—­æ—¶æœº**
  - ç¼“è§£ï¼šæ¯ä¸ª dialog å•ç‹¬æŠ½å–æ—¶ä¿æŒ `v-model` å­—æ®µä¸äº‹ä»¶å¤„ç†ä¸å˜ã€‚
- **é£é™©ï¼šscoped style / :deep é€‰æ‹©å™¨ä½œç”¨åŸŸå˜åŒ–**
  - ç¼“è§£ï¼šå…ˆä¿ç•™æ ·å¼åœ¨çˆ¶ç»„ä»¶ï¼›å¿…è¦æ—¶å°†é€šç”¨æ ·å¼ç§»åŠ¨åˆ°æ›´åˆé€‚çš„ä½ç½®ï¼Œä½†éœ€é€æ­¥éªŒè¯ã€‚

## Migration Planï¼ˆæ¸è¿›æ‹†åˆ†ï¼‰

1. âœ… åˆ›å»ºæ–°ç›®å½•ç»“æ„ä¸ä¸Šä¸‹æ–‡ç±»å‹ï¼ˆä¸æ”¹å˜åŠŸèƒ½ï¼‰ã€‚
2. âœ… åœ¨çˆ¶ç»„ä»¶ä¸­æ·»åŠ  provideï¼Œå¯¼å‡º Contextã€‚
3. ğŸ”„ é€ä¸ªæŠŠ Step1~4 çš„æ¨¡æ¿è¿ç§»åˆ° step å­ç»„ä»¶ï¼š
   - æ¯è¿ç§»ä¸€ä¸ª stepï¼šç¼–è¯‘/è¿è¡Œï¼Œæ‰‹åŠ¨ç‚¹æµ‹å…³é”®è·¯å¾„ã€‚
4. å°†å¯å¤ç”¨å¯¹è¯æ¡†ä» step ä¸­æŠ½ç¦»åˆ° dialogsï¼ˆä¿æŒ v-model ä¸äº‹ä»¶å‡½æ•°ä¸€è‡´ï¼‰ã€‚
5. å¯é€‰ï¼šæŠŠ"çº¯å‡½æ•°/æ˜ å°„/æ ¡éªŒ"é€æ­¥è¿ç§»åˆ° composablesï¼Œçˆ¶å±‚åªç»„è£…ã€‚

## Validation

- é™æ€æ£€æŸ¥ï¼š`npm -C frontend run lint`
- æ„å»ºéªŒè¯ï¼š`npm -C frontend run build` âœ… å·²é€šè¿‡
- æ‰‹åŠ¨å›å½’ï¼ˆæœ€å°é›†ï¼‰ï¼š
  - Step1ï¼šä¸Šä¼ /ç®¡ç†éŸ³é¢‘æºæ–‡ä»¶
  - Step2ï¼šåˆ›å»º/ç¼–è¾‘/åˆ é™¤/é¢„è§ˆå£°éŸ³
  - Step3ï¼šåˆ›å»º/ç¼–è¾‘/åˆ é™¤é”®éŸ³ï¼›ä¾èµ–è­¦å‘Šå±•ç¤º
  - Step4ï¼šåˆ‡æ¢ embedded test soundï¼›æ‰“å¼€å…¨å±€è®¾ç½®å¯¹è¯æ¡†å¹¶é€‰æ‹©å£°æ•ˆ
  - Step header æŠ˜å /å±•å¼€ï¼ˆstep=99ï¼‰ä¸ Continue/Back å¯¼èˆª
