# 任务：专辑配置加密变更

## 1. 实现

- [x] 1.1 添加密钥派生 + AES-GCM 加解密辅助函数（`audioPackage/enc/enc.go`）。
- [x] 1.2 实现检测：修改 `LoadConfig` 尝试 JSON 解析，失败则解密降级到临时目录。
- [x] 1.3 实现写回：在 `WriteConfig` 后挂钩原子重新加密源文件。
- [x] 1.4 集成加密流程：添加独立 API 路由 `POST /encrypt_album_config`（携带 `albumPath` 参数）供前端在选择"需要签名"时调用，后端根据路径加密对应专辑配置；前端在导出流程中选择"需要签名"时自动调用此 API。
- [x] 1.5 调整加密存储：将密文写入二进制文件 `core`，并在 `package.json` 写入指示 JSON。
- [x] 1.6 更新配置加载逻辑：识别指示 JSON，读取 `core` 解密到临时目录，同时兼容旧版十六进制密文。
- [x] 1.7 更新写回流程：在指示 JSON 模式下重新加密并原子写入 `core`，确保指示 JSON 稳定。
- [x] 1.8 更新调试 CLI（`audioPackage/cmd/printconfig`）：支持 `core` 存储与 `--raw` 输出。
- [x] 1.9 调整导入结构校验与导出压缩流程：确保 `core` 随包携带并被识别。
- [ ] 1.10 设计并实现旧版十六进制密文到 `core` 的迁移策略（加载或加密过程触发）。
- [ ] 1.11 单元测试：密钥派生、加解密往返、降级加载、写回、CLI、迁移、导入导出。
- [ ] 1.12 文档与示例更新：`TESTING.md`、README 等记录 `core` 文件格式与调试方法。
- [ ] 1.13 运行 `go test` 并验证无回归；lint 构建通过。

## 2. 验证

- [ ] 验证指示 JSON 不暴露实际配置且可识别 `core`。
- [ ] 验证 `core` 格式的专辑支持加载、修改、导出仍保持加密。
- [ ] 验证旧版十六进制密文可被迁移并保持可用（如实现迁移）。
- [ ] 验证导出/导入流程适用于明文与 `core` 格式。

## 3. 文档

- [ ] 更新 changelog 添加功能摘要。
- [ ] 在 README 中记录调试 CLI 用法与 `core` 存储说明。
