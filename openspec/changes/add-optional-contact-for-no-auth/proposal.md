# 变更：无需授权场景增加可选联系方式填写

## 为什么需要

在现有导出签名流程中：
- **需要签名 + 需要授权**：用户必须填写联系方式（邮箱必填）
- **需要签名 + 无需授权**：直接进入签名选择，无联系方式填写环节

这导致选择"无需授权"的原始作者无法留下联系方式供他人咨询或反馈。虽然不强制要求授权，原始作者可能仍希望他人能够联系自己。

## 变更内容

### 新增功能

1. **可选联系方式对话框**（`OptionalContactDialog.vue`）
   - 在用户选择"无需授权"后显示
   - 邮箱输入为可选（如填写则校验格式）
   - 附加联系方式为可选
   - 提供"跳过"按钮，用户可直接跳过此步骤
   - 提供"保存并继续"按钮，保存联系方式后进入签名选择

2. **状态机增强**（`useExportSignatureFlow.ts`）
   - 新增 `optional-contact` 状态
   - 选择"无需授权"后进入可选联系方式步骤
   - 支持跳过或填写后继续

3. **数据存储**
   - 复用现有字段 `contactEmail` 和 `contactAdditional`
   - 无需修改数据结构

### 流程变化

**原流程（无需授权）**：
```
授权策略选择 → 签名选择
```

**新流程（无需授权）**：
```
授权策略选择 → 可选联系方式 → 签名选择
                  ↓
               (可跳过)
```

### UI 设计

- 对话框标题：`留下联系方式（可选）`
- 主色调：`teal`（与授权相关的 `primary` 色调区分）
- 按钮：
  - 左侧：跳过（灰色，flat）
  - 右侧：保存并继续（teal，unelevated）

### i18n 翻译键

```json
{
  "exportFlow": {
    "optionalContact": {
      "title": "留下联系方式（可选）",
      "description": "您可以选择留下联系方式，便于他人与您取得联系。此步骤为可选，可直接跳过。",
      "hint": "联系方式将随签名一同保存，供他人查阅",
      "skip": "跳过",
      "continue": "保存并继续"
    }
  }
}
```

## 受影响文件

| 文件                                                            | 变更类型 | 说明                   |
| --------------------------------------------------------------- | -------- | ---------------------- |
| `frontend/src/components/export-flow/OptionalContactDialog.vue` | 新增     | 可选联系方式对话框组件 |
| `frontend/src/components/export-flow/useExportSignatureFlow.ts` | 修改     | 新增状态和处理函数     |
| `frontend/src/pages/Keytone_album_page_new.vue`                 | 修改     | 引入新对话框           |
| `frontend/src/i18n/zh-CN/index.json`                            | 修改     | 新增翻译键             |
| `frontend/src/i18n/en-US/index.json`                            | 修改     | 新增翻译键             |
| `openspec/specs/export-flow/spec.md`                            | 修改     | 更新规格说明           |

## 测试要点

- [ ] 选择"无需授权"后显示可选联系方式对话框
- [ ] 点击"跳过"直接进入签名选择，联系方式不被保存
- [ ] 输入有效邮箱后点击"保存并继续"，联系方式被保存
- [ ] 输入无效邮箱格式时显示错误提示，禁用继续
- [ ] 仅输入附加联系方式（不输入邮箱）也可保存
- [ ] 联系方式最终随签名配置保存到专辑
