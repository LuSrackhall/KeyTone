# 构建版本兼容性与加密产物说明

本项目是一个完全开源的项目。  
但需要注意的是，**官方发布版本与社区自行构建的版本，在某些产物格式上并不保证完全兼容**，尤其是在涉及加密功能时。

## 构建时身份（Build-Time Identity）

部分功能依赖于在**构建阶段注入的参数**（例如签名或加密相关的身份信息），这些参数**不会包含在公开的源码仓库中**。

- 官方发布版本在受控的构建环境中生成，并注入私有构建参数  
- 社区构建版本不包含这些私有参数  
- 两者使用的是**同一套源代码**，差异仅体现在**构建时身份**上  

这种差异是**有意设计的**，且仅限于与身份相关的行为。

## 对称密钥注入（本地私有构建）

项目中部分对称加密 secret 在源码中保留了开源默认值，但允许在私有/本地构建时通过**构建阶段注入**进行覆盖（与授权流密钥相同模式）。

- 未注入时：行为与当前开源默认完全一致。
- 注入后：不同构建身份之间的加密产物可能不可互通（符合设计预期）。

---

# 加密产物的兼容性

本软件可以生成**加密的产物**，用于保护用户的著作权和内容安全。

由于加密所使用的密钥**与构建身份相关**：

- 由以下版本生成的加密产物：
  - 官方发布版本生成的加密产物，**无法导入**社区构建版本
  - 社区构建版本生成的加密产物，**无法导入**官方发布版本
- 该不兼容性**仅影响加密产物**
- 未加密的产物在不同构建版本之间仍然**完全可互通**

这一设计用于防止加密后的用户产物被轻易地在不同构建身份之间复制、导入或滥用。

---

# 设计动机

该方案旨在平衡以下三个目标：

- **开源透明性**  
  所有加密相关的逻辑与实现均完全开源、可审计。
- **用户内容保护**  
  加密机制用于降低用户产物被逆向、篡改或随意分发的风险。
- **清晰的信任边界**  
  构建身份决定了哪些产物被视为可兼容。

本机制**不包含任何隐藏逻辑、后门或未公开的能力**。  
构建版本之间的差异仅体现在**产物层面的兼容性**，而非源码行为或运行逻辑。

---

# 本机制 *不是什么*

- ❌ 不是用于限制软件使用的 DRM 系统  
- ❌ 不是对源码编译、修改或分发的限制  
- ❌ 不是用于隐藏功能或行为的手段  

加密仅影响**用户主动选择加密的产物**的生成与使用方式。

---

# 总结

> 社区构建版本与官方发布版本使用相同的代码库，但具有不同的加密身份。  
> 因此，加密产物在不同构建身份之间是刻意设计为不可互通的。